// Created by 任泽阳 on 18/12/06. // 提示框
<template>
  <section class="common-tip">
    <ul>
      <!-- 改，2022.11.14 修改提示弹窗样式 -->
      <transition-group name="tip">
        <li
          v-for="(item, index) in domList"
          :key="item.time"
          class="common-tip-even a-4-bg b-1-cl"
          :class="item.color"
        >
          <svg
            v-if="item.type === 'info' || item.type === 'warning'"
            class="icon"
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
          >
            <path
              class="light-show"
              d="M9.00008 12.899C9.23619 12.899 9.43411 12.8192 9.59383 12.6595C9.75355 12.4997 9.83341 12.3018 9.83341 12.0657C9.83341 11.8296 9.75355 11.6317 9.59383 11.472C9.43411 11.3122 9.23619 11.2324 9.00008 11.2324C8.76397 11.2324 8.56605 11.3122 8.40633 11.472C8.24661 11.6317 8.16675 11.8296 8.16675 12.0657C8.16675 12.3018 8.24661 12.4997 8.40633 12.6595C8.56605 12.8192 8.76397 12.899 9.00008 12.899ZM8.16675 9.56571H9.83341V4.56571H8.16675V9.56571ZM9.00008 17.0657C7.8473 17.0657 6.76397 16.847 5.75008 16.4095C4.73619 15.972 3.85425 15.3782 3.10425 14.6282C2.35425 13.8782 1.7605 12.9963 1.323 11.9824C0.885498 10.9685 0.666748 9.88516 0.666748 8.73238C0.666748 7.5796 0.885498 6.49627 1.323 5.48238C1.7605 4.46849 2.35425 3.58655 3.10425 2.83655C3.85425 2.08655 4.73619 1.4928 5.75008 1.0553C6.76397 0.617798 7.8473 0.399048 9.00008 0.399048C10.1529 0.399048 11.2362 0.617798 12.2501 1.0553C13.264 1.4928 14.1459 2.08655 14.8959 2.83655C15.6459 3.58655 16.2397 4.46849 16.6772 5.48238C17.1147 6.49627 17.3334 7.5796 17.3334 8.73238C17.3334 9.88516 17.1147 10.9685 16.6772 11.9824C16.2397 12.9963 15.6459 13.8782 14.8959 14.6282C14.1459 15.3782 13.264 15.972 12.2501 16.4095C11.2362 16.847 10.1529 17.0657 9.00008 17.0657Z"
              fill="white"
            />
            <path
              class="dark-show"
              d="M9.00008 12.899C9.23619 12.899 9.43411 12.8192 9.59383 12.6595C9.75355 12.4997 9.83341 12.3018 9.83341 12.0657C9.83341 11.8296 9.75355 11.6317 9.59383 11.472C9.43411 11.3122 9.23619 11.2324 9.00008 11.2324C8.76397 11.2324 8.56605 11.3122 8.40633 11.472C8.24661 11.6317 8.16675 11.8296 8.16675 12.0657C8.16675 12.3018 8.24661 12.4997 8.40633 12.6595C8.56605 12.8192 8.76397 12.899 9.00008 12.899ZM8.16675 9.56571H9.83341V4.56571H8.16675V9.56571ZM9.00008 17.0657C7.8473 17.0657 6.76397 16.847 5.75008 16.4095C4.73619 15.972 3.85425 15.3782 3.10425 14.6282C2.35425 13.8782 1.7605 12.9963 1.323 11.9824C0.885498 10.9685 0.666748 9.88516 0.666748 8.73238C0.666748 7.5796 0.885498 6.49627 1.323 5.48238C1.7605 4.46849 2.35425 3.58655 3.10425 2.83655C3.85425 2.08655 4.73619 1.4928 5.75008 1.0553C6.76397 0.617798 7.8473 0.399048 9.00008 0.399048C10.1529 0.399048 11.2362 0.617798 12.2501 1.0553C13.264 1.4928 14.1459 2.08655 14.8959 2.83655C15.6459 3.58655 16.2397 4.46849 16.6772 5.48238C17.1147 6.49627 17.3334 7.5796 17.3334 8.73238C17.3334 9.88516 17.1147 10.9685 16.6772 11.9824C16.2397 12.9963 15.6459 13.8782 14.8959 14.6282C14.1459 15.3782 13.264 15.972 12.2501 16.4095C11.2362 16.847 10.1529 17.0657 9.00008 17.0657Z"
              fill="#222222"
            />
          </svg>
          <svg
            v-if="item.type === 'error'"
            class="icon"
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
          >
            <path
              class="light-show"
              d="M6.00008 12.899L9.00008 9.89905L12.0001 12.899L13.1667 11.7324L10.1667 8.73238L13.1667 5.73238L12.0001 4.56571L9.00008 7.56571L6.00008 4.56571L4.83341 5.73238L7.83342 8.73238L4.83341 11.7324L6.00008 12.899ZM9.00008 17.0657C7.8473 17.0657 6.76397 16.847 5.75008 16.4095C4.73619 15.972 3.85425 15.3782 3.10425 14.6282C2.35425 13.8782 1.7605 12.9963 1.323 11.9824C0.885498 10.9685 0.666748 9.88516 0.666748 8.73238C0.666748 7.5796 0.885498 6.49627 1.323 5.48238C1.7605 4.46849 2.35425 3.58655 3.10425 2.83655C3.85425 2.08655 4.73619 1.4928 5.75008 1.0553C6.76397 0.617798 7.8473 0.399048 9.00008 0.399048C10.1529 0.399048 11.2362 0.617798 12.2501 1.0553C13.264 1.4928 14.1459 2.08655 14.8959 2.83655C15.6459 3.58655 16.2397 4.46849 16.6772 5.48238C17.1147 6.49627 17.3334 7.5796 17.3334 8.73238C17.3334 9.88516 17.1147 10.9685 16.6772 11.9824C16.2397 12.9963 15.6459 13.8782 14.8959 14.6282C14.1459 15.3782 13.264 15.972 12.2501 16.4095C11.2362 16.847 10.1529 17.0657 9.00008 17.0657Z"
              fill="white"
            />
            <path
              class="dark-show"
              d="M6.00008 12.899L9.00008 9.89905L12.0001 12.899L13.1667 11.7324L10.1667 8.73238L13.1667 5.73238L12.0001 4.56571L9.00008 7.56571L6.00008 4.56571L4.83341 5.73238L7.83342 8.73238L4.83341 11.7324L6.00008 12.899ZM9.00008 17.0657C7.8473 17.0657 6.76397 16.847 5.75008 16.4095C4.73619 15.972 3.85425 15.3782 3.10425 14.6282C2.35425 13.8782 1.7605 12.9963 1.323 11.9824C0.885498 10.9685 0.666748 9.88516 0.666748 8.73238C0.666748 7.5796 0.885498 6.49627 1.323 5.48238C1.7605 4.46849 2.35425 3.58655 3.10425 2.83655C3.85425 2.08655 4.73619 1.4928 5.75008 1.0553C6.76397 0.617798 7.8473 0.399048 9.00008 0.399048C10.1529 0.399048 11.2362 0.617798 12.2501 1.0553C13.264 1.4928 14.1459 2.08655 14.8959 2.83655C15.6459 3.58655 16.2397 4.46849 16.6772 5.48238C17.1147 6.49627 17.3334 7.5796 17.3334 8.73238C17.3334 9.88516 17.1147 10.9685 16.6772 11.9824C16.2397 12.9963 15.6459 13.8782 14.8959 14.6282C14.1459 15.3782 13.264 15.972 12.2501 16.4095C11.2362 16.847 10.1529 17.0657 9.00008 17.0657Z"
              fill="#222222"
            />
          </svg>
          <svg
            v-if="item.type === 'success'"
            class="icon"
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
          >
            <path
              class="light-show"
              d="M7.83342 12.5657L13.7084 6.69071L12.5417 5.52405L7.83342 10.2324L5.45841 7.85738L4.29175 9.02405L7.83342 12.5657ZM9.00008 17.0657C7.8473 17.0657 6.76397 16.847 5.75008 16.4095C4.73619 15.972 3.85425 15.3782 3.10425 14.6282C2.35425 13.8782 1.7605 12.9963 1.323 11.9824C0.885498 10.9685 0.666748 9.88516 0.666748 8.73238C0.666748 7.5796 0.885498 6.49627 1.323 5.48238C1.7605 4.46849 2.35425 3.58655 3.10425 2.83655C3.85425 2.08655 4.73619 1.4928 5.75008 1.0553C6.76397 0.617798 7.8473 0.399048 9.00008 0.399048C10.1529 0.399048 11.2362 0.617798 12.2501 1.0553C13.264 1.4928 14.1459 2.08655 14.8959 2.83655C15.6459 3.58655 16.2397 4.46849 16.6772 5.48238C17.1147 6.49627 17.3334 7.5796 17.3334 8.73238C17.3334 9.88516 17.1147 10.9685 16.6772 11.9824C16.2397 12.9963 15.6459 13.8782 14.8959 14.6282C14.1459 15.3782 13.264 15.972 12.2501 16.4095C11.2362 16.847 10.1529 17.0657 9.00008 17.0657Z"
              fill="white"
            />
            <path
              class="dark-show"
              d="M7.83342 12.5657L13.7084 6.69071L12.5417 5.52405L7.83342 10.2324L5.45841 7.85738L4.29175 9.02405L7.83342 12.5657ZM9.00008 17.0657C7.8473 17.0657 6.76397 16.847 5.75008 16.4095C4.73619 15.972 3.85425 15.3782 3.10425 14.6282C2.35425 13.8782 1.7605 12.9963 1.323 11.9824C0.885498 10.9685 0.666748 9.88516 0.666748 8.73238C0.666748 7.5796 0.885498 6.49627 1.323 5.48238C1.7605 4.46849 2.35425 3.58655 3.10425 2.83655C3.85425 2.08655 4.73619 1.4928 5.75008 1.0553C6.76397 0.617798 7.8473 0.399048 9.00008 0.399048C10.1529 0.399048 11.2362 0.617798 12.2501 1.0553C13.264 1.4928 14.1459 2.08655 14.8959 2.83655C15.6459 3.58655 16.2397 4.46849 16.6772 5.48238C17.1147 6.49627 17.3334 7.5796 17.3334 8.73238C17.3334 9.88516 17.1147 10.9685 16.6772 11.9824C16.2397 12.9963 15.6459 13.8782 14.8959 14.6282C14.1459 15.3782 13.264 15.972 12.2501 16.4095C11.2362 16.847 10.1529 17.0657 9.00008 17.0657Z"
              fill="#222222"
            />
          </svg>
          <!-- <svg v-if="item.type === 'warning'" class="icon icon-16" aria-hidden="true">
            <use xlink:href="#icon-c_6"></use>
          </svg> -->
          <div class="text">{{ item.text }}</div>
          <svg
            class="del"
            @click="closeItem(index)"
            xmlns="http://www.w3.org/2000/svg"
            width="12"
            height="13"
            viewBox="0 0 12 13"
            fill="none"
          >
            <path
              class="light-show"
              d="M1.2 12.7324L0 11.5324L4.8 6.73242L0 1.93242L1.2 0.732422L6 5.53242L10.8 0.732422L12 1.93242L7.2 6.73242L12 11.5324L10.8 12.7324L6 7.93242L1.2 12.7324Z"
              fill="white"
            />
            <path
              class="dark-show"
              d="M1.2 12.7324L0 11.5324L4.8 6.73242L0 1.93242L1.2 0.732422L6 5.53242L10.8 0.732422L12 1.93242L7.2 6.73242L12 11.5324L10.8 12.7324L6 7.93242L1.2 12.7324Z"
              fill="#222222"
            />
          </svg>
        </li>
      </transition-group>
    </ul>
  </section>
</template>
<script>
export default {
  name: "c-tip",
  data() {
    return {
      list: [
        // { text: 'error', time: 3000, type: 'error' },
        // { text: 'success', time: 3000, type: 'success' },
        // { text: 'info', time: 3000, type: 'info' },
        // { text: 'warning', time: 3000, type: 'warning' }
      ],
    };
  },
  computed: {
    domList() {
      const list = [];
      // 改，2022.11.14 修改边框颜色为背景颜色
      this.list.forEach((item) => {
        let color = "";
        switch (item.type) {
          case "error":
            color = "error";
            break;
          case "success":
            color = "success";
            break;
          case "info":
            color = "info";
            break;
          case "warning":
            color = "info";
            break;
          default:
            color = "info";
        }
        list.push({ ...item, ...{ color } });
      });
      return list;
    },
  },
  mounted() {
    this.$bus.$on("tip", ({ text, type = "info" }) => {
      const time = new Date().getTime();
      this.list.unshift({
        text,
        type,
        time,
      });
      setTimeout(() => {
        let id = -1;
        this.list.forEach((item, index) => {
          if (item.time === time) id = index;
        });
        this.list.splice(id, 1);
      }, 3000);
    });
  },
  methods: {
    // 改，2022.11.14 新增手动关闭弹窗
    closeItem(index) {
      this.list.splice(index, 1);
    },
  },
};
</script>
<style lang="stylus">
.tip-item-move {
  display: inline-block;
  margin-right: 10px;
}
.tip-enter-active, .tip-leave-active {
  transition: all 0.3s;
}
.tip-enter, .tip-leave-to
/* .list-leave-active for below version 2.1.8 */ {
  opacity: 0;
  transform: translateX(30%);
}

.common-tip {
  position: fixed;
  right: 20px;
  top: 83px;
  z-index: 9999;
  .info {
    border-left-width: 3px;
    border-left-style: solid;
  }
  .common-tip-even {
    box-shadow: 0px 2px 10px rgba(0,0,0,0.15);
    width: 367px;
    padding: 16px 32px 16px 16px;
    min-height: 52px;
    margin-bottom: 26px;
    // 改，2022.11.14 去掉边框
    //border-left-width: 3px;
    //border-left-style: solid;
    box-sizing: border-box;
    transition: all 0.3s;
    // 改，2022.11.14 边距修改 原：padding: 22px 25px 22px 52px;
    position: relative;
    border-radius: 8px;
    display: flex;
    align-items: center;
    .icon {
      width: 17px;
      height: 17px;
      margin-right: 9px;
      flex-shrink: 0;
    }
    .text{
      text-align: left;
      color: var(--color-BTN-BUY-SELL-text);
      font-size: 16px;
      font-style: normal;
      font-weight: 600;
      line-height: 20px;
    }
    &.error {
      background-color: var(--color-Negative);
    }
    &.success {
      background-color: var(--color-Positive);
    }
    &.info {
      background-color: var(--color-BTN-nutrual-bg);
    }
  }
}

.common-tip-even > .del {
  position: absolute;
  top: 20px;
  right: 16px;
  cursor: pointer;
}

.common-tip-even.b-1-cl {
  color #FFFFFF !important;
}
</style>
